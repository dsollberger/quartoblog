{
  "hash": "26fd64670c46854506739fdbee93e4e6",
  "result": {
    "markdown": "---\ntitle: \"Settlement Survival\"\nauthor: \"Derek Sollberger\"\ndate: \"2024-02-25\"\nformat: html\n---\n\n\nOne of my silly side-projects is to organize the dependency chart in the Settlement Survival video game into a `mermaid` diagram (or a similar flow chart). \n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(\"DiagrammeR\")\n```\n:::\n\n\nI called this settlement \"Palo Verde\" after a town that used to exist in the Los Angeles area.  I was reading about Palo Verde in a book called *Stealing Home*, which provides history of the area that became Dodger Stadium.\n\nI was also reading another history book called *Salt*, and Settlement Survival will allow me to simulate a community that relies on salt exports.\n\n# Settings\n\nI simply play this game on \"easy\" difficulty settings to relax.  That mainly means that natural disasters will not fall onto Palo Verde.\n\n::: {.callout-note collapse=\"true\"}\n## Settings\n\n![](Palo_Verde_settings.png)\n![](Palo_Verde_settings_2.png)\n:::\n\n# Year 1: Settlement\n\nToday, I will start with the beginning of the game---that is, what tends to be built in the first \"year\".  I am going to take some liberties and actually *add* more prerequisites in the beginning (otherwise, the graph simply starts with about 9 unlinked nodes).\n\nWe choose a place that appeared to have promising grounds for fields and farming while still near to some mountains.\n\n![Choosing a Staring Point](Palo_Verde_20231226.png)\n\n::: {.panel-tabset}\n\n## Flowchart\n\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div class=\"DiagrammeR html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-79f8799044e3ccaa2a1f\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-79f8799044e3ccaa2a1f\">{\"x\":{\"diagram\":\"\\n  graph TD\\n  start[Select Location]\\n  \\n  house1[1 House]\\n  fields[3 Standard Fields]\\n  water[Big Well]\\n  forest_hut[Forester's Hut]\\n  gather_hut[Gatherer's Hut]\\n  hunter_hut[Hunter's Hut]\\n  chopping_house[Chopping House]\\n  house10[10 Houses]\\n  \\n  start --> house1\\n  start --> fields\\n  start --> water\\n  start --> hunter_hut\\n  \\n  house1 --> house10\\n  fields --> forest_hut\\n  water --> gather_hut\\n  hunter_hut --> chopping_house\\n\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n## Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\nyear_1_tree <- DiagrammeR::mermaid(\"\n  graph TD\n  start[Select Location]\n  \n  house1[1 House]\n  fields[3 Standard Fields]\n  water[Big Well]\n  forest_hut[Forester's Hut]\n  gather_hut[Gatherer's Hut]\n  hunter_hut[Hunter's Hut]\n  chopping_house[Chopping House]\n  house10[10 Houses]\n  \n  start --> house1\n  start --> fields\n  start --> water\n  start --> hunter_hut\n  \n  house1 --> house10\n  fields --> forest_hut\n  water --> gather_hut\n  hunter_hut --> chopping_house\n\")\n\n# print\nyear_1_tree\n```\n:::\n\n\n:::\n\n## Houses and Farms\n\nThe initial 30 settlers want at least `7 houses` to comfortably live with their families.\n\nMeanwhile, we start with `3 standard fields` to grow food\n\n* 2 fields of cabbages\n* one field of pumpkins on the especially fertile grounds\n\n![houses and farms](year_1_houses_farms.png)\n\n## Division of Labor\n\nAfter the farmers sow seeds for the year, I send some to build a `Forester's Hut` out in the woods to coordinate the chopping down of trees to get fuel for to survive the first winter.\n\nSome folks quickly make a `Big Well` and one of them works as a water deliverer.  Others move out to the forest too to build a `Gatherer's Hut` to gather wild herbs and berries.\n\n::: {.callout-tip collapse=\"true\"}\n## Forestry\n\nYou can toggle the desire for the foresters to\n\n* fell trees\n* plant trees\n\nFor instance, by telling the forester to not chop down trees, a lush forest will grow around the `Forester's Hut`, which may be better for the *nearby* `Gatherer's Hut`.  You can always ask the townsfolk at large to chop down trees when needed.\n:::\n\nA hunter also went out in to the woods to build a `Hunter's Hut`, but the town has a higher priority to have firewood, so the crew is sent back into the main village to build a `Chopping House`.\n\n\n\n![village and beyond](year_1_expanded.png)\n\nEarly ambition leads to some surplus of supplies, so we spend a **tech point** to learn how to build a `Warehouse` for storage.\n\n\n# Year 2: Community\n\nAfter surviving the first winter on the inventory that we arrived with at the marketplace, our main priorities are to grow crops for sustenance and chopping wood for survival.  Nevertheless, the townsfolk want to build a community, so let us build \n\n* a `Chapel` (for the game mechanic of happiness)\n* a `Clinic` (for the game mechanic of health)\n* a `School` (game mechanic where educated people are more productive at their jobs)\n* 2 `Latrine` (a lot of city planning is \"Where does the poop go?\")\n\n::: {.panel-tabset}\n\n## Flowchart\n\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div class=\"DiagrammeR html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-0896e8fa6e1965632380\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-0896e8fa6e1965632380\">{\"x\":{\"diagram\":\"\\n  graph TD\\n  start[Select Location]\\n  \\n  house1[1 House]\\n  fields[3 Standard Fields]\\n  water[Big Well]\\n  forest_hut[Forester's Hut]\\n  gather_hut[Gatherer's Hut]\\n  hunter_hut[Hunter's Hut]\\n  chopping_house[Chopping House]\\n  house10[10 Houses]\\n  chapel[Chapel]\\n  clinic[Clinic]\\n  school[School]\\n  latrine[2 Latrines]\\n  \\n  start --> house1\\n  start --> fields\\n  start --> water\\n  start --> hunter_hut\\n  \\n  house1 --> house10\\n  fields --> forest_hut\\n  water --> gather_hut\\n  hunter_hut --> chopping_house\\n  \\n  house10 --> chapel\\n  forest_hut --> clinic\\n  gather_hut --> school\\n  chopping_house --> latrine\\n\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n## Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\nyear_2_tree <- DiagrammeR::mermaid(\"\n  graph TD\n  start[Select Location]\n  \n  house1[1 House]\n  fields[3 Standard Fields]\n  water[Big Well]\n  forest_hut[Forester's Hut]\n  gather_hut[Gatherer's Hut]\n  hunter_hut[Hunter's Hut]\n  chopping_house[Chopping House]\n  house10[10 Houses]\n  chapel[Chapel]\n  clinic[Clinic]\n  school[School]\n  latrine[2 Latrines]\n  \n  start --> house1\n  start --> fields\n  start --> water\n  start --> hunter_hut\n  \n  house1 --> house10\n  fields --> forest_hut\n  water --> gather_hut\n  hunter_hut --> chopping_house\n  \n  house10 --> chapel\n  forest_hut --> clinic\n  gather_hut --> school\n  chopping_house --> latrine\n\")\n\n# print\nyear_2_tree\n```\n:::\n\n\n:::\n\n\n# Year 3: Immigration\n\nThe original settlers are a little homesick and want some more of the variety that their former towns had.  Alas, we don't have many people leftover to take on new jobs, so we need to welcome immigrants to our settlement.  This means demand for new homes to house them all and a `Town Hall` for these official matters.\n\n![town hall](year_3_town_hall.png)\n\n::::: {.panel-tabset}\n\n## Flowchart\n\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div class=\"DiagrammeR html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-bc669d11f9a9048fc941\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-bc669d11f9a9048fc941\">{\"x\":{\"diagram\":\"\\n  graph TD\\n  start[Select Location]\\n  \\n  house1[1 House]\\n  fields[3 Standard Fields]\\n  water[Big Well]\\n  forest_hut[Forester's Hut]\\n  gather_hut[Gatherer's Hut]\\n  hunter_hut[Hunter's Hut]\\n  chopping_house[Chopping House]\\n  house10[10 Houses]\\n  chapel[Chapel]\\n  clinic[Clinic]\\n  school[School]\\n  latrine[2 Latrines]\\n  town_hall[Town Hall]\\n  \\n  start --> house1\\n  start --> fields\\n  start --> water\\n  start --> hunter_hut\\n  \\n  house1 --> house10\\n  fields --> forest_hut\\n  water --> gather_hut\\n  hunter_hut --> chopping_house\\n  \\n  house10 --> chapel\\n  forest_hut --> clinic\\n  gather_hut --> school\\n  chopping_house --> latrine\\n  \\n  chapel --> town_hall\\n  clinic --> town_hall\\n  school --> town_hall\\n  latrine --> town_hall\\n\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n## Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\nyear_3_tree <- DiagrammeR::mermaid(\"\n  graph TD\n  start[Select Location]\n  \n  house1[1 House]\n  fields[3 Standard Fields]\n  water[Big Well]\n  forest_hut[Forester's Hut]\n  gather_hut[Gatherer's Hut]\n  hunter_hut[Hunter's Hut]\n  chopping_house[Chopping House]\n  house10[10 Houses]\n  chapel[Chapel]\n  clinic[Clinic]\n  school[School]\n  latrine[2 Latrines]\n  town_hall[Town Hall]\n  \n  start --> house1\n  start --> fields\n  start --> water\n  start --> hunter_hut\n  \n  house1 --> house10\n  fields --> forest_hut\n  water --> gather_hut\n  hunter_hut --> chopping_house\n  \n  house10 --> chapel\n  forest_hut --> clinic\n  gather_hut --> school\n  chopping_house --> latrine\n  \n  chapel --> town_hall\n  clinic --> town_hall\n  school --> town_hall\n  latrine --> town_hall\n\")\n\n# print\nyear_3_tree\n```\n:::\n\n\n## Admin\n\n:::: {.columns}\n\n::: {.column width=\"50%\"}\nUpon reaching a population of 50, we elected an administrator to start to oversee matters.  The charismatic Virginia uses her experience in entertainment to reduce the stress of the citizens.\n\nThe other candidate was personable too, but ran on a platform of increased fruit yield (but we don't have any orchards yet).\n:::\n\n::: {.column width=\"10%\"}\n<!-- empty column to create gap -->\n:::\n\n::: {.column width=\"40%\"}\n![Administrator Virginia](year_3_admin.png)\n:::\n\n::::\n\n\n:::::\n\n\n# Year 4: Mining\n\nIn this magical land, the trees grow back quickly, so having enough lumber is easy to achieve.  However, stone and iron ore do not replenish in the grassy valleys, so we ask the young laborers to excavate \n\n* a `Mine` in a mountainside\n* a `Quarry` along the border of our territory\n\nBoth are indestructible (cannot reclaim the land nor materials), so we placed both features far from the main community areas.\n\n![mine and quarry](year_4_mine_quarry.png)\n\n::::: {.panel-tabset}\n\n## Flowchart\n\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div class=\"DiagrammeR html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-8c8a729f7b93b2734a92\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-8c8a729f7b93b2734a92\">{\"x\":{\"diagram\":\"\\n  graph TD\\n  town_hall[Town Hall]\\n  mine[Mine]\\n  quarry[Quarry]\\n  \\n  town_hall --> mine\\n  town_hall --> quarry\\n\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n## Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\nyear_4_tree <- DiagrammeR::mermaid(\"\n  graph TD\n  town_hall[Town Hall]\n  mine[Mine]\n  quarry[Quarry]\n  \n  town_hall --> mine\n  town_hall --> quarry\n\")\n\n# print\nyear_4_tree\n```\n:::\n\n\n:::::\n\n\n# Year 5: Dredge\n\nWith a steady supply of stone and iron ore (for now), we can look toward the river for more resources.  The clever townsfolk construct 2 `Sandpit`---one to gather sand, and another to gather clay. The sand pits are placed near the warehouses for quick storage.\n\n![sand pits](year_5_dredge.png)\n\nMeanwhile, work out in the `Mine`, in the `Quarry`, and on the fields creates wear and tear.  The townsfolk needed rough clothes and stone tools.  Thus, a `Tailor` and a `Smithy` are granted buildings to meet those respective needs.\n\n::::: {.panel-tabset}\n\n## Flowchart\n\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div class=\"DiagrammeR html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-e95920c9f23a789e9d66\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-e95920c9f23a789e9d66\">{\"x\":{\"diagram\":\"\\n  graph TD\\n  town_hall[Town Hall]\\n  mine[Mine]\\n  quarry[Quarry]\\n  sandpit_sand[Sand Pit: Sand]\\n  sandpit_clay[Sand Pit: Clay]\\n  tailor[Tailor]\\n  smithy[Smithy]\\n  \\n  town_hall --> mine\\n  town_hall --> quarry\\n  \\n  mine --> sandpit_sand\\n  quarry --> sandpit_sand\\n  mine --> sandpit_clay\\n  quarry --> sandpit_clay\\n  town_hall --> tailor\\n  quarry --> smithy\\n\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n## Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\nyear_5_tree <- DiagrammeR::mermaid(\"\n  graph TD\n  town_hall[Town Hall]\n  mine[Mine]\n  quarry[Quarry]\n  sandpit_sand[Sand Pit: Sand]\n  sandpit_clay[Sand Pit: Clay]\n  tailor[Tailor]\n  smithy[Smithy]\n  \n  town_hall --> mine\n  town_hall --> quarry\n  \n  mine --> sandpit_sand\n  quarry --> sandpit_sand\n  mine --> sandpit_clay\n  quarry --> sandpit_clay\n  town_hall --> tailor\n  quarry --> smithy\n\")\n\n# print\nyear_5_tree\n```\n:::\n\n\n:::::\n\n\n# Year 6: Animals\n\nA fad grabbed the attention of entreprenuerial townsfolk, and they built a couple of `Apiary` to raise bees.  We can either gather honey or beeswax at apiaries, and we focus on the latter now by storing surplus beeswax in the warehouses.\n\n::: {.callout-note collapse=\"true\"}\n## Commentary on Apiaries\n\nI liked the apiaries in-game because the trade value of beeswax.  However, patches of the game nerfed some abilities to accelerate the growth of settlements (while enhancing other aspects of the game).  Now, the beeswax is no more valuable than selling crops from the fields.  I chose to build 2 apiaries here (along with assigning 3 villagers to each) out of nostalgia.  Furthermore, I liked having a crop (beeswax) that was separate from our main food supplies.\n:::\n\n![Apiaries](year_6_apiaries.png)\n\nAlso, with the growing town, finding animals through the `Hunters Hut` did not produce enough materials for the `Tailor`, so we dedicated some land as a `Pasture` to raise some alpacas to eventually get a steady supply of fur, fat, and meat.\n\n::::: {.panel-tabset}\n\n## Flowchart\n\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div class=\"DiagrammeR html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-61b97b111d7dc97b190d\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-61b97b111d7dc97b190d\">{\"x\":{\"diagram\":\"\\n  graph TD\\n  town_hall[Town Hall]\\n  mine[Mine]\\n  quarry[Quarry]\\n  sandpit_sand[Sand Pit: Sand]\\n  sandpit_clay[Sand Pit: Clay]\\n  tailor[Tailor]\\n  smithy[Smithy]\\n  apiary[Apriary]\\n  pasture[Pasture]\\n  \\n  town_hall --> mine\\n  town_hall --> quarry\\n  \\n  mine --> sandpit_sand\\n  quarry --> sandpit_sand\\n  mine --> sandpit_clay\\n  quarry --> sandpit_clay\\n  town_hall --> tailor\\n  quarry --> smithy\\n  \\n  sandpit_sand --> apiary\\n  sandpit_clay --> apiary\\n  tailor --> pasture\\n\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n## Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\nyear_6_tree <- DiagrammeR::mermaid(\"\n  graph TD\n  town_hall[Town Hall]\n  mine[Mine]\n  quarry[Quarry]\n  sandpit_sand[Sand Pit: Sand]\n  sandpit_clay[Sand Pit: Clay]\n  tailor[Tailor]\n  smithy[Smithy]\n  apiary[Apriary]\n  pasture[Pasture]\n  \n  town_hall --> mine\n  town_hall --> quarry\n  \n  mine --> sandpit_sand\n  quarry --> sandpit_sand\n  mine --> sandpit_clay\n  quarry --> sandpit_clay\n  town_hall --> tailor\n  quarry --> smithy\n  \n  sandpit_sand --> apiary\n  sandpit_clay --> apiary\n  tailor --> pasture\n\")\n\n# print\nyear_6_tree\n```\n:::\n\n\n:::::\n\n\n# Year 7: Trade\n\nWhile the tailor and smithy are valued members of the community, it seems that production of clothes and tools respectively will not match the needs for a growing settlement. We build a `Small Trading Post` and send out caravans (7 villagers each) to buy those supplies.  We have plenty of flax (from the initial settlement supplies) and beeswax (from the apiaries) to sell in the processes.  I try to obtain each desired good at an amount of double the current population, but also mindful to try to make the caravan have a positive gain in silver coins.\n\n::: {.callout-note collapse=\"true\"}\n## Commentary on Insurance\n\nYes, it seems to be good to always get the insurance (small cost now, but pays out if the caravan trip does not return).  The game has been refined to make the insurance worth it.\n:::\n\n::::: {.panel-tabset}\n\n## Flowchart\n\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div class=\"DiagrammeR html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-0284134deb7ff7977398\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-0284134deb7ff7977398\">{\"x\":{\"diagram\":\"\\n  graph TD\\n  town_hall[Town Hall]\\n  mine[Mine]\\n  quarry[Quarry]\\n  sandpit_sand[Sand Pit: Sand]\\n  sandpit_clay[Sand Pit: Clay]\\n  tailor[Tailor]\\n  smithy[Smithy]\\n  apiary[Apriary]\\n  pasture[Pasture]\\n  small_trading_post[Small Trading Post]\\n  \\n  town_hall --> mine\\n  town_hall --> quarry\\n  \\n  mine --> sandpit_sand\\n  quarry --> sandpit_sand\\n  mine --> sandpit_clay\\n  quarry --> sandpit_clay\\n  town_hall --> tailor\\n  quarry --> smithy\\n  \\n  sandpit_sand --> apiary\\n  sandpit_clay --> apiary\\n  tailor --> pasture\\n  \\n  apiary --> small_trading_post\\n\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n## Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\nyear_7_tree <- DiagrammeR::mermaid(\"\n  graph TD\n  town_hall[Town Hall]\n  mine[Mine]\n  quarry[Quarry]\n  sandpit_sand[Sand Pit: Sand]\n  sandpit_clay[Sand Pit: Clay]\n  tailor[Tailor]\n  smithy[Smithy]\n  apiary[Apriary]\n  pasture[Pasture]\n  small_trading_post[Small Trading Post]\n  \n  town_hall --> mine\n  town_hall --> quarry\n  \n  mine --> sandpit_sand\n  quarry --> sandpit_sand\n  mine --> sandpit_clay\n  quarry --> sandpit_clay\n  town_hall --> tailor\n  quarry --> smithy\n  \n  sandpit_sand --> apiary\n  sandpit_clay --> apiary\n  tailor --> pasture\n  \n  apiary --> small_trading_post\n\")\n\n# print\nyear_7_tree\n```\n:::\n\n\n## Trade 1\n\nThe first trade sent beeswax and flax to Miao's faction in exchange for rough clothes.\n\n![](year_7_trade_1.png)\n\n## Trade 2\n\nThe first trade sent beeswax and flax to Lorenzo's faction in exchange for iron tools.\n\n![](year_7_trade_2.png)\n\n:::::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js\"></script>\r\n<script src=\"../../site_libs/d3-3.3.8/d3.min.js\"></script>\r\n<script src=\"../../site_libs/dagre-0.4.0/dagre-d3.min.js\"></script>\r\n<link href=\"../../site_libs/mermaid-0.3.0/dist/mermaid.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/mermaid-0.3.0/dist/mermaid.slim.min.js\"></script>\r\n<link href=\"../../site_libs/DiagrammeR-styles-0.2/styles.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/chromatography-0.1/chromatography.js\"></script>\r\n<script src=\"../../site_libs/DiagrammeR-binding-1.0.10/DiagrammeR.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}