{
  "hash": "a9f87537d8aaab2a66d4d9c5f9cced3e",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Frasier Data\"\nauthor: \"Derek Sollberger\"\ndate: \"2025-12-28\"\nformat:\n  html:\n    toc: true\n---\n\n\n\n# Frasier\n\nFrasier was a TV show back in the 1990s.  Sometimes my friends and I rewatch the show out of nostalgia.  In the past few years, [Sulabh Bista](https://www.kaggle.com/datasets/sulabhbista/frasier-dialogs) parsed the episode scripts that were compiled by [KACL.net](https://www.kacl780.net/), and that allows us hobbyist data analysts to seek insights.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(\"dplyr\")\nlibrary(\"ggplot2\")\nlibrary(\"stringr\")\n\ndf <- readr::read_csv(\"script.csv\")\n```\n:::\n\n\n\n\n# Prompt 1\n\nA friend asked\n\n> You should create a graph to show the frequency of references to Frederick in Frasier. I feel it falls to near zero after the first half of the first season\n\nLet's go!\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_Frederick <- df |>\n  mutate(dialog = stringr::str_to_lower(dialog)) |>\n  mutate(mentioned_Frederick = stringr::str_count(dialog, \"frederick\"),\n         mentioned_Freddie = stringr::str_count(dialog, \"freddie\")) |>\n  group_by(Season, Episode) |>\n  mutate(n_Frederick = sum(mentioned_Frederick, na.rm = TRUE) + \n           sum(mentioned_Freddie, na.rm = TRUE)) |>\n  ungroup() |>\n  select(Season, Episode, n_Frederick) |>\n  distinct()\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# https://r-charts.com/correlation/heat-map-ggplot2/\ndf_Frederick |>\n  ggplot(aes(x = Episode, y = reorder(Season, desc(Season)), \n             fill = n_Frederick)) +\n  geom_tile(color = \"#cccccc\",\n            lwd = 1.5, linetype = 1) +\n  geom_text(aes(label = n_Frederick), color = \"black\", size = 3) +\n  coord_fixed() +\n  labs(title = \"How often do we hear about Frederick?\",\n       subtitle = \"Frasier TV show (1990s)\",\n       caption = \"Derek Sollberger\\nSource: KACL.net\",\n       x = \"episode number\", y = \"season\") +\n  scale_fill_gradient(low = \"white\", high = \"#08872B\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](frasier_data_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\nPerhaps a log transformation would get more contrast.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_Frederick |>\n  mutate(log_Frederick = log(n_Frederick + 1)) |>\n  ggplot(aes(x = Episode, y = reorder(Season, desc(Season)), \n             fill = log_Frederick)) +\n  geom_tile(color = \"#cccccc\",\n            lwd = 1.5, linetype = 1) +\n  geom_text(aes(label = n_Frederick), color = \"black\", size = 3) +\n  coord_fixed() +\n  labs(title = \"How often do we hear about Frederick?\",\n       subtitle = \"Frasier TV show (1990s)\",\n       caption = \"Derek Sollberger\\nSource: KACL.net\",\n       x = \"episode number\", y = \"season\") +\n  scale_fill_gradient(low = \"white\", high = \"#08872B\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](frasier_data_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n::: {.callout-note collapse=\"true\"}\n## Session Info\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsessionInfo()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.5.1 (2025-06-13 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nRunning under: Windows 10 x64 (build 19045)\n\nMatrix products: default\n  LAPACK version 3.12.1\n\nlocale:\n[1] LC_COLLATE=English_United States.utf8 \n[2] LC_CTYPE=English_United States.utf8   \n[3] LC_MONETARY=English_United States.utf8\n[4] LC_NUMERIC=C                          \n[5] LC_TIME=English_United States.utf8    \n\ntime zone: America/New_York\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] stringr_1.5.1 ggplot2_4.0.0 dplyr_1.1.4  \n\nloaded via a namespace (and not attached):\n [1] bit_4.6.0          gtable_0.3.6       jsonlite_2.0.0     compiler_4.5.1    \n [5] crayon_1.5.3       tidyselect_1.2.1   parallel_4.5.1     scales_1.4.0      \n [9] yaml_2.3.10        fastmap_1.2.0      readr_2.1.5        R6_2.6.1          \n[13] labeling_0.4.3     generics_0.1.4     knitr_1.50         htmlwidgets_1.6.4 \n[17] tibble_3.3.0       pillar_1.11.0      RColorBrewer_1.1-3 tzdb_0.5.0        \n[21] rlang_1.1.6        stringi_1.8.7      xfun_0.52          S7_0.2.0          \n[25] bit64_4.6.0-1      cli_3.6.5          withr_3.0.2        magrittr_2.0.3    \n[29] digest_0.6.37      grid_4.5.1         vroom_1.6.5        rstudioapi_0.17.1 \n[33] hms_1.1.3          lifecycle_1.0.4    vctrs_0.6.5        evaluate_1.0.4    \n[37] glue_1.8.0         farver_2.1.2       rmarkdown_2.29     tools_4.5.1       \n[41] pkgconfig_2.0.3    htmltools_0.5.8.1 \n```\n\n\n:::\n:::\n\n\n:::\n\n\n:::: {.columns}\n\n::: {.column width=\"45%\"}\n\t\n:::\n\n::: {.column width=\"10%\"}\n\t\n:::\n\n::: {.column width=\"45%\"}\n\n:::\n\n::::\n\n::::: {.panel-tabset}\n\n\n\n:::::",
    "supporting": [
      "frasier_data_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}