<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Derek Sollberger">
<meta name="dcterms.date" content="2025-07-16">

<title>Andre Ethier versus Brad Lidge – The Median Data Scientist</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-2f6844b3748638c5738d4cf93630e566.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">The Median Data Scientist</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Andre Ethier versus Brad Lidge</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Derek Sollberger </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">July 16, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#setting-the-scene" id="toc-setting-the-scene" class="nav-link active" data-scroll-target="#setting-the-scene">Setting the Scene</a></li>
  <li><a href="#data-sets" id="toc-data-sets" class="nav-link" data-scroll-target="#data-sets">Data Sets</a>
  <ul class="collapse">
  <li><a href="#lahman" id="toc-lahman" class="nav-link" data-scroll-target="#lahman">Lahman</a></li>
  <li><a href="#retrosheet" id="toc-retrosheet" class="nav-link" data-scroll-target="#retrosheet">Retrosheet</a></li>
  <li><a href="#statcast" id="toc-statcast" class="nav-link" data-scroll-target="#statcast">Statcast</a></li>
  </ul></li>
  <li><a href="#match-ups" id="toc-match-ups" class="nav-link" data-scroll-target="#match-ups">Match Ups</a>
  <ul class="collapse">
  <li><a href="#retrosheet-1" id="toc-retrosheet-1" class="nav-link" data-scroll-target="#retrosheet-1">Retrosheet</a></li>
  <li><a href="#statcast-1" id="toc-statcast-1" class="nav-link" data-scroll-target="#statcast-1">Statcast</a></li>
  </ul></li>
  <li><a href="#schedule" id="toc-schedule" class="nav-link" data-scroll-target="#schedule">Schedule</a></li>
  <li><a href="#standings" id="toc-standings" class="nav-link" data-scroll-target="#standings">Standings</a>
  <ul class="collapse">
  <li><a href="#season" id="toc-season" class="nav-link" data-scroll-target="#season">2008 Season</a></li>
  <li><a href="#season-1" id="toc-season-1" class="nav-link" data-scroll-target="#season-1">2009 Season</a></li>
  </ul></li>
  <li><a href="#play-by-play" id="toc-play-by-play" class="nav-link" data-scroll-target="#play-by-play">Play by Play</a>
  <ul class="collapse">
  <li><a href="#retrosheet-play-by-play-data" id="toc-retrosheet-play-by-play-data" class="nav-link" data-scroll-target="#retrosheet-play-by-play-data">Retrosheet play-by-play data</a></li>
  <li><a href="#first-inning" id="toc-first-inning" class="nav-link" data-scroll-target="#first-inning">First Inning</a></li>
  <li><a href="#run-scoring-plays" id="toc-run-scoring-plays" class="nav-link" data-scroll-target="#run-scoring-plays">Run-Scoring Plays</a></li>
  </ul></li>
  <li><a href="#bottom-of-the-ninth" id="toc-bottom-of-the-ninth" class="nav-link" data-scroll-target="#bottom-of-the-ninth">Bottom of the Ninth</a></li>
  <li><a href="#epilogue" id="toc-epilogue" class="nav-link" data-scroll-target="#epilogue">Epilogue</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"ggtext"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"Lahman"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"retrosheet"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"tidyverse"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="setting-the-scene" class="level1">
<h1>Setting the Scene</h1>
<p>I am finally reading <a href="https://beanumber.github.io/abdwr3e/">Analyzing Baseball Data with R</a>, and thankfully there is a book club over at the DSLC Slack channel (Data Science Learning Community). I want to apply our new skills to a particular half-inning that is cherished in my memories. In particular, I want to see if I can find <em>a particular at-bat by Andre Ethier where he faced Brad Lidge in the bottom of the ninth</em> …</p>
<div class="columns">
<div class="column" style="width:45%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Brad_Lidge_Phillies.png" class="img-fluid figure-img"></p>
<figcaption>Brad Lidge</figcaption>
</figure>
</div>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:45%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Andre_Ethier_Dodgers.png" class="img-fluid figure-img"></p>
<figcaption>Andre Ethier</figcaption>
</figure>
</div>
</div>
</div>
<p>After volunteering to present the chapter on Quarto for our book club, I have decided to further explore the <code>retrosheet</code> package for R users.</p>
</section>
<section id="data-sets" class="level1">
<h1>Data Sets</h1>
<section id="lahman" class="level2">
<h2 class="anchored" data-anchor-id="lahman">Lahman</h2>
<p>The <a href="https://github.com/cdalzell/Lahman">Lahman</a> data set can help us find overall information through its <code>People</code>, <code>Batting</code>, <code>Pitching</code>, <code>Fielding</code>, and <code>Teams</code> tables (and this data set is more extensive than I remember). First, let us find certain players in the <code>People</code> table:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>Lahman<span class="sc">::</span>People <span class="sc">|&gt;</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(nameLast <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Ethier"</span>, <span class="st">"Lidge"</span>, <span class="st">"Werth"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   playerID birthYear birthMonth birthDay   birthCity birthCountry birthState
1 ethiean01      1982          4       10     Phoenix          USA         AZ
2 lidgebr01      1976         12       23  Sacramento          USA         CA
3 werthde01      1952         12       29     Lincoln          USA         IL
4 werthja01      1979          5       20 Springfield          USA         IL
  deathYear deathMonth deathDay deathCountry deathState deathCity nameFirst
1        NA         NA       NA         &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;     Andre
2        NA         NA       NA         &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;      Brad
3        NA         NA       NA         &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;    Dennis
4        NA         NA       NA         &lt;NA&gt;       &lt;NA&gt;      &lt;NA&gt;    Jayson
  nameLast            nameGiven weight height bats throws      debut   bbrefID
1   Ethier        Andre Everett    210     74    L      L 2006-05-02 ethiean01
2    Lidge       Bradley Thomas    210     77    R      R 2002-04-26 lidgebr01
3    Werth          Dennis Dean    200     73    R      R 1979-09-17 werthde01
4    Werth Jayson Richard Gowan    235     77    R      R 2002-09-01 werthja01
   finalGame  retroID deathDate  birthDate
1 2017-10-01 ethia001      &lt;NA&gt; 1982-04-10
2 2012-06-16 lidgb001      &lt;NA&gt; 1976-12-23
3 1982-09-27 wertd101      &lt;NA&gt; 1952-12-29
4 2017-10-01 wertj001      &lt;NA&gt; 1979-05-20</code></pre>
</div>
</div>
<p>We will need these player IDs (the latter one in the case of “Werth”). I will now try to look up Ethier, Lidge, and Werth in the <code>Batting</code>, <code>Pitching</code>, and <code>Fielding</code> tables respectively.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Batting</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Pitching</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Fielding</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>Lahman<span class="sc">::</span>Batting <span class="sc">|&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(playerID <span class="sc">==</span> <span class="st">"ethiean01"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    playerID yearID stint teamID lgID   G  AB  R   H X2B X3B HR RBI SB CS BB
1  ethiean01   2006     1    LAN   NL 126 396 50 122  20   7 11  55  5  5 34
2  ethiean01   2007     1    LAN   NL 153 447 50 127  32   2 13  64  0  4 46
3  ethiean01   2008     1    LAN   NL 141 525 90 160  38   5 20  77  6  3 59
4  ethiean01   2009     1    LAN   NL 160 596 92 162  42   3 31 106  6  4 72
5  ethiean01   2010     1    LAN   NL 139 517 71 151  33   1 23  82  2  1 59
6  ethiean01   2011     1    LAN   NL 135 487 67 142  30   0 11  62  0  1 58
7  ethiean01   2012     1    LAN   NL 149 556 79 158  36   1 20  89  2  2 50
8  ethiean01   2013     1    LAN   NL 142 482 54 131  33   2 12  52  4  3 61
9  ethiean01   2014     1    LAN   NL 130 341 29  85  17   6  4  42  2  2 31
10 ethiean01   2015     1    LAN   NL 142 395 54 116  20   7 14  53  2  3 43
11 ethiean01   2016     1    LAN   NL  16  24  2   5   1   0  1   2  0  0  2
12 ethiean01   2017     1    LAN   NL  22  34  3   8   1   0  2   3  0  0  4
    SO IBB HBP SH SF GIDP
1   77   2   5  0  6   11
2   68  12   4  0  8   10
3   88   0   4  1  7    6
4  116  10  13  0  4   19
5  102  11   3  0  6   11
6  103   9   3  0  3    8
7  124   6   9  0  3   13
8   95  11   7  0  3    9
9   74   3   6  1  1    5
10  75   2   4  0  3   11
11   6   1   0  0  0    1
12  10   1   0  0  0    0</code></pre>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>Lahman<span class="sc">::</span>Pitching <span class="sc">|&gt;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(playerID <span class="sc">==</span> <span class="st">"lidgebr01"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    playerID yearID stint teamID lgID W L  G GS CG SHO SV IPouts  H ER HR BB
1  lidgebr01   2002     1    HOU   NL 1 0  6  1  0   0  0     26 12  6  0  9
2  lidgebr01   2003     1    HOU   NL 6 3 78  0  0   0  1    255 60 34  6 42
3  lidgebr01   2004     1    HOU   NL 6 5 80  0  0   0 29    284 57 20  8 30
4  lidgebr01   2005     1    HOU   NL 4 4 70  0  0   0 42    212 58 18  5 23
5  lidgebr01   2006     1    HOU   NL 1 5 78  0  0   0 32    225 69 44 10 36
6  lidgebr01   2007     1    HOU   NL 5 3 66  0  0   0 19    201 54 25  9 30
7  lidgebr01   2008     1    PHI   NL 2 0 72  0  0   0 41    208 50 15  2 35
8  lidgebr01   2009     1    PHI   NL 0 8 67  0  0   0 31    176 72 47 11 34
9  lidgebr01   2010     1    PHI   NL 1 1 50  0  0   0 27    137 32 15  5 24
10 lidgebr01   2011     1    PHI   NL 0 2 25  0  0   0  1     58 16  3  0 13
11 lidgebr01   2012     1    WAS   NL 0 1 11  0  0   0  2     28 12 10  1 11
    SO BAOpp  ERA IBB WP HBP BK BFP GF  R SH SF GIDP
1   12 0.333 6.23   1  0   2  0  48  2  6  1  0    1
2   97 0.202 3.60   7  4   5  1 349  9 36  2  3    6
3  157 0.174 1.90   5  3   6  1 369 44 21  3  2    5
4  103 0.223 2.29   1  8   3  0 291 65 21  4  1    1
5  104 0.238 5.28   4 11   6  0 340 52 47  6  2    2
6   88 0.219 3.36   4  6   4  0 287 34 29  5  1    3
7   92 0.198 1.95   4  5   1  0 292 61 17  2  1    3
8   61 0.301 7.21   3  4   5  0 283 55 51  4  1    4
9   52 0.194 2.96   4  3   1  1 193 38 16  3  0    2
10  23 0.225 1.40   3  2   1  0  86  4  3  1  0    1
11  10 0.308 9.64   5  0   0  0  51  4 10  1  0    0</code></pre>
</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>Lahman<span class="sc">::</span>Fielding <span class="sc">|&gt;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(playerID <span class="sc">==</span> <span class="st">"werthja01"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    playerID yearID stint teamID lgID POS   G  GS InnOuts  PO  A E DP PB WP SB
1  werthja01   2002     1    TOR   AL  OF  15  13     363  33  1 0  0 NA NA NA
2  werthja01   2003     1    TOR   AL  OF  20  11     324  27  1 0  0 NA NA NA
3  werthja01   2004     1    LAN   NL  OF  79  70    1932 146  6 4  2 NA NA NA
4  werthja01   2005     1    LAN   NL  OF 101  96    2493 218  6 3  2 NA NA NA
5  werthja01   2007     1    PHI   NL  1B   1   0       3   1  0 0  0 NA NA NA
6  werthja01   2007     1    PHI   NL  OF  76  63    1727 147  9 2  2 NA NA NA
7  werthja01   2008     1    PHI   NL  OF 125 103    2898 231  9 2  2 NA NA NA
8  werthja01   2009     1    PHI   NL  OF 157 152    4138 353 11 6  4 NA NA NA
9  werthja01   2010     1    PHI   NL  OF 153 150    4026 293  8 4  2 NA NA NA
10 werthja01   2011     1    WAS   NL  OF 149 148    3973 342 11 8  4 NA NA NA
11 werthja01   2012     1    WAS   NL  OF  79  79    2076 166  4 1  1 NA NA NA
12 werthja01   2013     1    WAS   NL  OF 126 126    3216 235  7 2  1 NA NA NA
13 werthja01   2014     1    WAS   NL  OF 139 137    3662 247  8 5  1 NA NA NA
14 werthja01   2015     1    WAS   NL  OF  86  84    2162 113  3 2  0 NA NA NA
15 werthja01   2016     1    WAS   NL  OF 133 133    3474 201  5 1  1 NA NA NA
16 werthja01   2017     1    WAS   NL  OF  67  67    1655 116  1 4  0 NA NA NA
   CS ZR
1  NA NA
2  NA NA
3  NA NA
4  NA NA
5  NA NA
6  NA NA
7  NA NA
8  NA NA
9  NA NA
10 NA NA
11 NA NA
12 NA NA
13 NA NA
14 NA NA
15 NA NA
16 NA NA</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Brad Lidge
</div>
</div>
<div class="callout-body-container callout-body">
<p>“Bradley Thomas Lidge (born December 23, 1976), nicknamed”Lights Out”,[1] is an American former professional baseball pitcher. Lidge played 11 seasons in Major League Baseball (MLB), from 2002–2012. He played for the Houston Astros, Philadelphia Phillies, and Washington Nationals. As a relief pitcher Lidge saved 225 games during his career. He was a two-time All-Star, and in 2008 won the Delivery Man of the Year Award and the National League (NL) Rolaids Relief Man Award. Lidge was a host on SiriusXM’s MLB Network Radio.</p>
<p>“Lidge threw a four-seam fastball that consistently reached 95–97 miles per hour, as well as a hard, sharp breaking slider that ranged from 85 to 87 mph. He also had a cutter of the variation. He sealed the Phillies’ 2008 World Series championship with the final out, a strikeout of Eric Hinske in Game 5.” —<a href="https://en.wikipedia.org/wiki/Brad_Lidge">Wikipedia</a></p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Andre Ethier
</div>
</div>
<div class="callout-body-container callout-body">
<p>“Andre Everett Ethier (/ˈiːθiər/; born April 10, 1982) is an American former professional baseball outfielder. He played in Major League Baseball (MLB) for the Los Angeles Dodgers from 2006 to 2017 and is second all-time in post-season appearances as a Dodger with 51.</p>
<p>“Drafted in the second round (62nd pick overall) of the 2003 MLB draft by the Oakland Athletics, Ethier played in the major leagues from 2006 through 2017, all for the Dodgers. Career highlights include All-Star selections in 2010 and 2011, a Silver Slugger Award in 2009, and a Gold Glove Award in 2011. Primarily a right fielder throughout his career, Ethier also filled in at left field and center field for the Dodgers. Due to leg and back injuries, he had only 58 at bats in the 2016 and 2017 regular seasons, combined.” —<a href="https://en.wikipedia.org/wiki/Andre_Ethier">Wikipedia</a></p>
</div>
</div>
</section>
<section id="retrosheet" class="level2">
<h2 class="anchored" data-anchor-id="retrosheet">Retrosheet</h2>
<p>Let us try out the <a href="https://cran.r-project.org/web/packages/retrosheet/index.html">retrosheet package</a> (by Colin Douglas and Richard Scriven) to get <strong>game data</strong> from each of those four seasons where <em>Brad Lidge was pitching for the Philadelphia Phillies</em>. Note: we probably do not have to concern ourselves with mid-season trades in this case study.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>season_2008 <span class="ot">&lt;-</span> retrosheet<span class="sc">::</span><span class="fu">get_retrosheet</span>(<span class="st">"game"</span>, <span class="dv">2008</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>season_2009 <span class="ot">&lt;-</span> retrosheet<span class="sc">::</span><span class="fu">get_retrosheet</span>(<span class="st">"game"</span>, <span class="dv">2009</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>season_2010 <span class="ot">&lt;-</span> retrosheet<span class="sc">::</span><span class="fu">get_retrosheet</span>(<span class="st">"game"</span>, <span class="dv">2010</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>season_2011 <span class="ot">&lt;-</span> retrosheet<span class="sc">::</span><span class="fu">get_retrosheet</span>(<span class="st">"game"</span>, <span class="dv">2011</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="statcast" class="level2">
<h2 class="anchored" data-anchor-id="statcast">Statcast</h2>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
(optional) Obtaining Chadwick IDs
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>As recommended by the textbook authors in section C.2, we can load a list of player IDs for Statcast data (takes a few seconds to load and download)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>chadwick_id <span class="ot">&lt;-</span> baseballr<span class="sc">::</span><span class="fu">chadwick_player_lu</span>()</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">write_rds</span>(chadwick_id, <span class="st">"data/chadwick_id.rds"</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>chadwick_id <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_rds</span>(<span class="st">"data/chadwick_id.rds"</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>statcast_ids <span class="ot">&lt;-</span> chadwick_id <span class="sc">|&gt;</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name_last <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Ethier"</span>, <span class="st">"Lidge"</span>, <span class="st">"Werth"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(key_mlbam, name_last, name_first, mlb_played_first, mlb_played_last) <span class="sc">|&gt;</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(mlb_played_first))</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">write_rds</span>(statcast_ids, <span class="st">"data/statcast_ids.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here, I kept a subset of the data rather than keeping a 100 MB file in our GitHub repo.</p>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>statcast_ids <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_rds</span>(<span class="st">"data/statcast_ids.rds"</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>statcast_ids</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 5
  key_mlbam name_last name_first mlb_played_first mlb_played_last
      &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;                 &lt;int&gt;           &lt;int&gt;
1    400058 Lidge     Brad                   2002            2012
2    124099 Werth     Dennis                 1979            1982
3    444843 Ethier    Andre                  2006            2017
4    150029 Werth     Jayson                 2002            2017</code></pre>
</div>
</div>
</section>
</section>
<section id="match-ups" class="level1">
<h1>Match Ups</h1>
<section id="retrosheet-1" class="level2">
<h2 class="anchored" data-anchor-id="retrosheet-1">Retrosheet</h2>
<p>For this case study, we can use the <code>filter</code> command from the <code>dplyr</code> to subset our data where</p>
<ul>
<li>visiting team: Philadelphia Phillies</li>
<li>home team: Los Angeles Dodgers</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>lidge_phillies_dodgers <span class="ot">&lt;-</span> <span class="fu">rbind</span>(season_2008, season_2009, season_2010, season_2011) <span class="sc">|&gt;</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(VisTm <span class="sc">==</span> <span class="st">"PHI"</span> <span class="sc">&amp;</span> HmTm <span class="sc">==</span> <span class="st">"LAN"</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>lidge_phillies_dodgers <span class="sc">|&gt;</span> <span class="fu">select</span>(Date, VisTm, HmTm, VisRuns, HmRuns, Attendance)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         Date VisTm HmTm VisRuns HmRuns Attendance
1  2008-08-11   PHI  LAN       6      8      45547
2  2008-08-12   PHI  LAN       3      4      47586
3  2008-08-13   PHI  LAN       6      7      45786
4  2008-08-14   PHI  LAN       1      3      51060
5  2009-06-04   PHI  LAN       3      0      33839
6  2009-06-05   PHI  LAN       3      4      52538
7  2009-06-06   PHI  LAN       2      3      41412
8  2009-06-07   PHI  LAN       7      2      42288
9  2010-08-30   PHI  LAN       0      3      44896
10 2010-08-31   PHI  LAN       8      4      45164
11 2010-09-01   PHI  LAN       5      1      37080
12 2011-08-08   PHI  LAN       5      3      35380
13 2011-08-09   PHI  LAN       2      1      46547
14 2011-08-10   PHI  LAN       9      8      41807</code></pre>
</div>
</div>
</section>
<section id="statcast-1" class="level2">
<h2 class="anchored" data-anchor-id="statcast-1">Statcast</h2>
<p>In addition to the calendar dates found above, we can try to get pitch-by-pitch data from the <code>statcast_search</code> function in the <code>baseballr</code> package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>lidge1 <span class="ot">&lt;-</span> baseballr<span class="sc">::</span><span class="fu">statcast_search</span>(<span class="at">start_date =</span> <span class="st">"2008-08-11"</span>, <span class="at">end_date =</span> <span class="st">"2008-08-11"</span>, <span class="at">playerid =</span> <span class="dv">400058</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Oops
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>I forgot that Statcast data only dates back to 2015</p>
</div>
</div>
</div>
</section>
</section>
<section id="schedule" class="level1">
<h1>Schedule</h1>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Why June 5, 2009?
</div>
</div>
<div class="callout-body-container callout-body">
<p>For brevity, I looked up the game in particular with a simple search of <a href="https://www.baseball-reference.com/boxes/LAN/LAN200906050.shtml">Baseball Reference</a>. Other <code>dplyr</code> filters could have been applied after more data wrangling.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>schedule_2009 <span class="ot">&lt;-</span> retrosheet<span class="sc">::</span><span class="fu">getRetrosheet</span>(<span class="st">"schedule"</span>, <span class="dv">2009</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>schedule_2009 <span class="sc">|&gt;</span> <span class="fu">filter</span>(Date <span class="sc">==</span> <span class="st">"20090605"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       Date GameNo Day VisTeam VisLg VisGmNo HmTeam HmLg HmGmNo TimeOfDay
1  20090605      0 Fri     MIL    NL      55    ATL   NL     55         N
2  20090605      0 Fri     TEX    AL      54    BOS   AL     55         N
3  20090605      0 Fri     CLE    AL      57    CHA   AL     56         N
4  20090605      0 Fri     CHN    NL      55    CIN   NL     55         N
5  20090605      0 Fri     ANA    AL      55    DET   AL     55         N
6  20090605      0 Fri     SFN    NL      53    FLO   NL     56         N
7  20090605      0 Fri     PIT    NL      56    HOU   NL     55         N
8  20090605      0 Fri     PHI    NL      55    LAN   NL     57         N
9  20090605      0 Fri     TBA    AL      57    NYA   AL     57         N
10 20090605      0 Fri     BAL    AL      55    OAK   AL     55         N
11 20090605      0 Fri     ARI    NL      56    SDN   NL     55         N
12 20090605      0 Fri     MIN    AL      56    SEA   AL     55         N
13 20090605      0 Fri     COL    NL      54    SLN   NL     57         N
14 20090605      0 Fri     KCA    AL      54    TOR   AL     57         N
15 20090605      0 Fri     NYN    NL      55    WAS   NL     55         N
   Postponed   Makeup
1                  NA
2                  NA
3                  NA
4                  NA
5                  NA
6                  NA
7                  NA
8                  NA
9       Rain 20090907
10                 NA
11                 NA
12                 NA
13                 NA
14                 NA
15                 NA</code></pre>
</div>
</div>
</section>
<section id="standings" class="level1">
<h1>Standings</h1>
<section id="season" class="level2">
<h2 class="anchored" data-anchor-id="season">2008 Season</h2>
<p>In the previous season,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>Lahman<span class="sc">::</span>Teams <span class="sc">|&gt;</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(yearID <span class="sc">==</span> <span class="dv">2008</span>) <span class="sc">|&gt;</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(lgID <span class="sc">==</span> <span class="st">"NL"</span>) <span class="sc">|&gt;</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(yearID, teamID, W, L, DivWin, WCWin, LgWin, WSWin) <span class="sc">|&gt;</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(W)) <span class="sc">|&gt;</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(W <span class="sc">&gt;</span> <span class="dv">81</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  yearID teamID  W  L DivWin WCWin LgWin WSWin
1   2008    CHN 97 64      Y     N     N     N
2   2008    PHI 92 70      Y     N     Y     Y
3   2008    MIL 90 72      N     Y     N     N
4   2008    NYN 89 73      N     N     N     N
5   2008    HOU 86 75      N     N     N     N
6   2008    SLN 86 76      N     N     N     N
7   2008    FLO 84 77      N     N     N     N
8   2008    LAN 84 78      Y     N     N     N
9   2008    ARI 82 80      N     N     N     N</code></pre>
</div>
</div>
<p>the Dodgers won the NL West (with a relatively low amount of wins), lost to the Phillies in the NLCS, and then Phillies went on to defeat the Tampa Bay Rays in the World Series.</p>
</section>
<section id="season-1" class="level2">
<h2 class="anchored" data-anchor-id="season-1">2009 Season</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>standings_2009 <span class="ot">&lt;-</span> season_2009 <span class="sc">|&gt;</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Date, VisTm, HmTm, VisRuns, HmRuns) <span class="sc">|&gt;</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">WinTm =</span> <span class="fu">ifelse</span>(VisRuns <span class="sc">&gt;</span> HmRuns, VisTm, HmTm)) <span class="sc">|&gt;</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(WinTm, Date, <span class="at">name =</span> <span class="st">"TeamWins"</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(WinTm) <span class="sc">|&gt;</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TeamWins =</span> <span class="fu">cumsum</span>(TeamWins)) <span class="sc">|&gt;</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Code</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="retrosheet_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>title_text <span class="ot">&lt;-</span> <span class="st">"&lt;span style='color:#E81828;'&gt;Philadelphia Phillies&lt;/span&gt; at &lt;span style='color:#005A9C;'&gt;Los Angeles Dodgers&lt;/span&gt;"</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>standings_2009 <span class="sc">|&gt;</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> TeamWins, <span class="at">group =</span> WinTm)) <span class="sc">+</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># geom_vline(xintercept = "2009-06-05") +</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> TeamWins, <span class="at">group =</span> WinTm),</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"gray70"</span>,</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">data =</span> standings_2009 <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="sc">!</span>WinTm <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"LAN"</span>, <span class="st">"PHI"</span>) <span class="sc">&amp;</span> Date <span class="sc">&lt;</span> <span class="st">"2009-06-05"</span>)) <span class="sc">+</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> TeamWins),</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"#005A9C"</span>,</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">data =</span> standings_2009 <span class="sc">|&gt;</span> </span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(WinTm <span class="sc">==</span> <span class="st">"LAN"</span> <span class="sc">&amp;</span> Date <span class="sc">&lt;</span> <span class="st">"2009-06-05"</span>),</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">linewidth =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> TeamWins),</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"#E81828"</span>,</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">data =</span> standings_2009 <span class="sc">|&gt;</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(WinTm <span class="sc">==</span> <span class="st">"PHI"</span> <span class="sc">&amp;</span> Date <span class="sc">&lt;</span> <span class="st">"2009-06-05"</span>),</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">linewidth =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> TeamWins),</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"#005A9C"</span>,</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>            <span class="at">data =</span> standings_2009 <span class="sc">|&gt;</span> </span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(WinTm <span class="sc">==</span> <span class="st">"LAN"</span> <span class="sc">&amp;</span> Date <span class="sc">==</span> <span class="st">"2009-06-03"</span>),</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> TeamWins),</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"#E81828"</span>,</span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>            <span class="at">data =</span> standings_2009 <span class="sc">|&gt;</span></span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(WinTm <span class="sc">==</span> <span class="st">"PHI"</span> <span class="sc">&amp;</span> Date <span class="sc">==</span> <span class="st">"2009-06-04"</span>),</span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> title_text,</span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"June 5, 2009"</span>,</span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Wins"</span>) <span class="sc">+</span></span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> ggtext<span class="sc">::</span><span class="fu">element_markdown</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="play-by-play" class="level1">
<h1>Play by Play</h1>
<section id="retrosheet-play-by-play-data" class="level2">
<h2 class="anchored" data-anchor-id="retrosheet-play-by-play-data">Retrosheet play-by-play data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>dodgers_2009 <span class="ot">&lt;-</span> retrosheet<span class="sc">::</span><span class="fu">getRetrosheet</span>(<span class="st">"play"</span>,  <span class="dv">2009</span>, <span class="st">"LAN"</span>)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co">#length(dodgers_2009) # 81 home games</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co">#class(dodgers_2009)  # list</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dodgers_2009[[<span class="dv">1</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 8
 $ id     : chr "LAN200904130"
 $ version: chr "2"
 $ info   : chr [1:26, 1:2] "visteam" "hometeam" "site" "date" ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:2] "category" "info"
 $ start  : chr [1:18, 1:5] "winnr001" "rente001" "lewif001" "molib001" ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:5] "retroID" "name" "team" "batPos" ...
 $ play   : chr [1:92, 1:6] "1" "1" "1" "1" ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:6] "inning" "team" "retroID" "count" ...
 $ com    : chr(0) 
 $ sub    : chr [1:17, 1:5] "valdm003" "velee001" "meddb001" "velee001" ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:5] "retroID" "name" "team" "batPos" ...
 $ data   : chr [1:8, 1:3] "er" "er" "er" "er" ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:3] "projCode" "retroID" "ER"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>num_home <span class="ot">&lt;-</span> <span class="fu">length</span>(dodgers_2009)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(game_index <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>num_home){</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(dodgers_2009[[game_index]]<span class="sc">$</span>id <span class="sc">==</span> <span class="st">"LAN200906050"</span>){</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">"Home game number: "</span>, game_index))</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">break</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Home game number: 28"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>dodgers200906050 <span class="ot">&lt;-</span> dodgers_2009[[<span class="dv">28</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>game_df <span class="ot">&lt;-</span> dodgers200906050<span class="sc">$</span>play <span class="sc">|&gt;</span> <span class="fu">as.data.frame</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="first-inning" class="level2">
<h2 class="anchored" data-anchor-id="first-inning">First Inning</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>game_df <span class="sc">|&gt;</span> <span class="fu">filter</span>(inning <span class="sc">==</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  inning team  retroID count   pitches             play
1      1    0 rollj001    10        BX           5/F56-
2      1    0 utlec001    01        CX         S5/G56S-
3      1    0 wertj001    32   BCSBB&gt;B            W.1-2
4      1    0 howar001    02       SFS                K
5      1    0 ibanr001    02       CFX           4/F4S-
6      1    1 pierj002    21      CBBX          S7/G56+
7      1    1 furcr001    00      11&gt;B              SB2
8      1    1 furcr001    31 11&gt;B.CBBX 4/P3F/DP.2X3(45)
9      1    1 hudso001    20       BBX          9/F89D+</code></pre>
</div>
</div>
</section>
<section id="run-scoring-plays" class="level2">
<h2 class="anchored" data-anchor-id="run-scoring-plays">Run-Scoring Plays</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>game_df <span class="sc">|&gt;</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((<span class="fu">str_detect</span>(retroID, <span class="st">"iba"</span>) <span class="sc">&amp;</span> inning <span class="sc">==</span> <span class="dv">3</span>) <span class="sc">|</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>           (<span class="fu">str_detect</span>(retroID, <span class="st">"utl"</span>) <span class="sc">&amp;</span> inning <span class="sc">==</span> <span class="dv">4</span>) <span class="sc">|</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>           (<span class="fu">str_detect</span>(retroID, <span class="st">"hud"</span>) <span class="sc">&amp;</span> inning <span class="sc">==</span> <span class="dv">4</span>) <span class="sc">|</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>           (<span class="fu">str_detect</span>(retroID, <span class="st">"lon"</span>) <span class="sc">&amp;</span> inning <span class="sc">==</span> <span class="dv">7</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  inning team  retroID count pitches                     play
1      3    0 ibanr001    11     FBX         36(1)/FO/G4S.3-H
2      4    0 utlec001    01      FX D9/L9LM+.2-H(UR);1-H(UR)
3      4    1 hudso001    20    *BBX              63/G6MD.3-H
4      7    1 lonej001    10      BX             S9/F89S-.2-H</code></pre>
</div>
</div>
<p>At this time, I simply used the parsed results at <a href="https://www.baseball-reference.com/boxes/LAN/LAN200906050.shtml">Baseball Reference</a></p>
<ul>
<li>top 3rd: Raul Ibanez RBI groundout (PHI 1, LAD 0)</li>
<li>top 4th: Chase Utley 2-RBI double (PHI 3, LAD 0)</li>
<li>bottom 4th: Orlando Hudson RBI groundout (PHI 3, LAD 1)</li>
<li>bottom 7th: James Loney RBI single (PHI 3, LAD 2)</li>
</ul>
</section>
</section>
<section id="bottom-of-the-ninth" class="level1">
<h1>Bottom of the Ninth</h1>
<div class="columns">
<div class="column" style="width:45%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>game_df <span class="sc">|&gt;</span> </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(inning <span class="sc">==</span> <span class="dv">9</span> <span class="sc">&amp;</span> team <span class="sc">==</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>With the save situation, Philadelphia sent their closer Brad Lidge to the mound to face the heart of the Dodger lineup.</p>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:45%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Brad_Lidge_Phillies.png" class="img-fluid figure-img"></p>
<figcaption>Brad Lidge</figcaption>
</figure>
</div>
</div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">Furcal</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Hudson</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false">Blake</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-4" role="tab" aria-controls="tabset-3-4" aria-selected="false">Loney</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-5" role="tab" aria-controls="tabset-3-5" aria-selected="false">Martin</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-6" role="tab" aria-controls="tabset-3-6" aria-selected="false">Ethier</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="columns">
<div class="column" style="width:30%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Rafael_Furcal_Dodgers.png" class="img-fluid figure-img"></p>
<figcaption>Rafael Furcal</figcaption>
</figure>
</div>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:60%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>game_df <span class="sc">|&gt;</span> </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(inning <span class="sc">==</span> <span class="dv">9</span> <span class="sc">&amp;</span> team <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(retroID, <span class="st">"fur"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  inning team  retroID count pitches play
1      9    1 furcr001    00           NP
2      9    1 furcr001    32 .CCBBBC    K</code></pre>
</div>
</div>
<p>After two quick strikes, Furcal worked up to a full count. Lidge was able to get Furcal to strikeout looking.</p>
<p><strong><span style="color:#E81828;">One out</span></strong></p>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="columns">
<div class="column" style="width:30%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Orlando_Hudson_Dodgers.png" class="img-fluid figure-img"></p>
<figcaption>Orlando Hudson</figcaption>
</figure>
</div>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:60%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>game_df <span class="sc">|&gt;</span> </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(inning <span class="sc">==</span> <span class="dv">9</span> <span class="sc">&amp;</span> team <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(retroID, <span class="st">"hud"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  inning team  retroID count pitches    play
1      9    1 hudso001    12    CBCX 13/G13-</code></pre>
</div>
</div>
<p>On a 1-2 count, Hudson grounded out to the pitcher.</p>
<p><strong><span style="color:#E81828;">Two outs</span></strong></p>
</div>
</div>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
<div class="columns">
<div class="column" style="width:30%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Casey_Blake_Dodgers.png" class="img-fluid figure-img"></p>
<figcaption>Casey Blake</figcaption>
</figure>
</div>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:60%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>game_df <span class="sc">|&gt;</span> </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(inning <span class="sc">==</span> <span class="dv">9</span> <span class="sc">&amp;</span> team <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(retroID, <span class="st">"bla"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  inning team  retroID count pitches    play
1      9    1 blakc001    12    CBSX S7/L78S</code></pre>
</div>
</div>
<p>After a 1-2 count, Casey Blake singled to left field.</p>
<p><strong><span style="color:#005A9C;">Runner on first</span></strong></p>
</div>
</div>
</div>
<div id="tabset-3-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-4-tab">
<div class="columns">
<div class="column" style="width:30%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/James_Loney_Dodgers.png" class="img-fluid figure-img"></p>
<figcaption>James Loney</figcaption>
</figure>
</div>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:60%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>game_df <span class="sc">|&gt;</span> </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(inning <span class="sc">==</span> <span class="dv">9</span> <span class="sc">&amp;</span> team <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(retroID, <span class="st">"lon"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  inning team  retroID count    pitches  play
1      9    1 lonej001    32 CBS*BF*B&gt;B W.1-2</code></pre>
</div>
</div>
<ul>
<li>called strike</li>
<li>ball</li>
<li>swinging strike (blocked by catcher)</li>
<li>ball</li>
<li>foul (blocked by catcher)</li>
<li>ball (Blake faked steal attempt)</li>
<li>ball (Blake to 2B)</li>
</ul>
<p>Clean-up hitter James Loney worked a walk.</p>
<p><strong><span style="color:#005A9C;">Runners on first and second</span></strong></p>
</div>
</div>
</div>
<div id="tabset-3-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-5-tab">
<div class="columns">
<div class="column" style="width:30%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Russel_Martin_Dodgers.png" class="img-fluid figure-img"></p>
<figcaption>Russel Martin</figcaption>
</figure>
</div>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:60%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>game_df <span class="sc">|&gt;</span> </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(inning <span class="sc">==</span> <span class="dv">9</span> <span class="sc">&amp;</span> team <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(retroID, <span class="st">"mar"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  inning team  retroID count pitches           play
1      9    1 martr004    12   S*BCX E5/G5+.2-3;1-2</code></pre>
</div>
</div>
<p>After a 1-2 count, Martin lightly hit a squibber, but the third baseman committed an error!</p>
<p><strong><span style="color:#005A9C;">Bases loaded</span></strong></p>
</div>
</div>
</div>
<div id="tabset-3-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-6-tab">
<div class="columns">
<div class="column" style="width:30%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Andre_Ethier_Dodgers.png" class="img-fluid figure-img"></p>
<figcaption>Andre Ethier</figcaption>
</figure>
</div>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:60%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>game_df <span class="sc">|&gt;</span> </span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(inning <span class="sc">==</span> <span class="dv">9</span> <span class="sc">&amp;</span> team <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(retroID, <span class="st">"eth"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  inning team  retroID count pitches                         play
1      9    1 ethia001    00       X D9/F9LD+.3-H(UR);2-H(UR);1-3</code></pre>
</div>
</div>
<p>On the very next pitch, Ethier hit a long double down the right-field line for a <strong>walk-off victory</strong>!</p>
<p><strong><span style="color:#005A9C;">Dodgers win!</span></strong></p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="epilogue" class="level1">
<h1>Epilogue</h1>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Code</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="retrosheet_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>title_text <span class="ot">&lt;-</span> <span class="st">"&lt;span style='color:#E81828;'&gt;Philadelphia Phillies&lt;/span&gt; at &lt;span style='color:#005A9C;'&gt;Los Angeles Dodgers&lt;/span&gt;"</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>standings_2009 <span class="sc">|&gt;</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> TeamWins, <span class="at">group =</span> WinTm)) <span class="sc">+</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># geom_vline(xintercept = "2009-06-05") +</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> TeamWins, <span class="at">group =</span> WinTm),</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"gray70"</span>,</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">data =</span> standings_2009 <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="sc">!</span>WinTm <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"LAN"</span>, <span class="st">"PHI"</span>))) <span class="sc">+</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> TeamWins),</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">0.5</span>,</span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"#005A9C"</span>,</span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">data =</span> standings_2009 <span class="sc">|&gt;</span> <span class="fu">filter</span>(WinTm <span class="sc">==</span> <span class="st">"LAN"</span>),</span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">linewidth =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> TeamWins),</span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">0.5</span>,</span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"#E81828"</span>,</span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">data =</span> standings_2009 <span class="sc">|&gt;</span> <span class="fu">filter</span>(WinTm <span class="sc">==</span> <span class="st">"PHI"</span>),</span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">linewidth =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> TeamWins),</span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"#005A9C"</span>,</span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a>            <span class="at">data =</span> standings_2009 <span class="sc">|&gt;</span> </span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(WinTm <span class="sc">==</span> <span class="st">"LAN"</span> <span class="sc">&amp;</span> Date <span class="sc">&lt;</span> <span class="st">"2009-06-05"</span>),</span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a>            <span class="at">linewidth =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> TeamWins),</span>
<span id="cb46-25"><a href="#cb46-25" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"#E81828"</span>,</span>
<span id="cb46-26"><a href="#cb46-26" aria-hidden="true" tabindex="-1"></a>            <span class="at">data =</span> standings_2009 <span class="sc">|&gt;</span></span>
<span id="cb46-27"><a href="#cb46-27" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(WinTm <span class="sc">==</span> <span class="st">"PHI"</span> <span class="sc">&amp;</span> Date <span class="sc">&lt;</span> <span class="st">"2009-06-05"</span>),</span>
<span id="cb46-28"><a href="#cb46-28" aria-hidden="true" tabindex="-1"></a>            <span class="at">linewidth =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb46-29"><a href="#cb46-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> TeamWins),</span>
<span id="cb46-30"><a href="#cb46-30" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"#005A9C"</span>,</span>
<span id="cb46-31"><a href="#cb46-31" aria-hidden="true" tabindex="-1"></a>            <span class="at">data =</span> standings_2009 <span class="sc">|&gt;</span> </span>
<span id="cb46-32"><a href="#cb46-32" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(WinTm <span class="sc">==</span> <span class="st">"LAN"</span> <span class="sc">&amp;</span> Date <span class="sc">==</span> <span class="st">"2009-06-05"</span>),</span>
<span id="cb46-33"><a href="#cb46-33" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb46-34"><a href="#cb46-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> TeamWins),</span>
<span id="cb46-35"><a href="#cb46-35" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"#E81828"</span>,</span>
<span id="cb46-36"><a href="#cb46-36" aria-hidden="true" tabindex="-1"></a>            <span class="at">data =</span> standings_2009 <span class="sc">|&gt;</span></span>
<span id="cb46-37"><a href="#cb46-37" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(WinTm <span class="sc">==</span> <span class="st">"PHI"</span> <span class="sc">&amp;</span> Date <span class="sc">==</span> <span class="st">"2009-06-04"</span>),</span>
<span id="cb46-38"><a href="#cb46-38" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb46-39"><a href="#cb46-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> title_text,</span>
<span id="cb46-40"><a href="#cb46-40" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"June 5, 2009"</span>,</span>
<span id="cb46-41"><a href="#cb46-41" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Wins"</span>) <span class="sc">+</span></span>
<span id="cb46-42"><a href="#cb46-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb46-43"><a href="#cb46-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> ggtext<span class="sc">::</span><span class="fu">element_markdown</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>Lahman<span class="sc">::</span>Teams <span class="sc">|&gt;</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(yearID <span class="sc">==</span> <span class="dv">2009</span>) <span class="sc">|&gt;</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(lgID <span class="sc">==</span> <span class="st">"NL"</span>) <span class="sc">|&gt;</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(yearID, teamID, W, L, DivWin, WCWin, LgWin, WSWin) <span class="sc">|&gt;</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(W)) <span class="sc">|&gt;</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(W <span class="sc">&gt;</span> <span class="dv">81</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  yearID teamID  W  L DivWin WCWin LgWin WSWin
1   2009    LAN 95 67      Y     N     N     N
2   2009    PHI 93 69      Y     N     Y     N
3   2009    COL 92 70      N     Y     N     N
4   2009    SLN 91 71      Y     N     N     N
5   2009    SFN 88 74      N     N     N     N
6   2009    FLO 87 75      N     N     N     N
7   2009    ATL 86 76      N     N     N     N
8   2009    CHN 83 78      N     N     N     N</code></pre>
</div>
</div>
<p>The Dodgers and Phillies would face off in the NLCS again in 2009—with the Phillies once again defeating the Dodgers 4 games to one. The Phillies would not repeat as champions in the World Series, however, as that season was won by the New York Yankees.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Session Info
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.5.1 (2025-06-13 ucrt)
Platform: x86_64-w64-mingw32/x64
Running under: Windows 10 x64 (build 19045)

Matrix products: default
  LAPACK version 3.12.1

locale:
[1] LC_COLLATE=English_United States.utf8 
[2] LC_CTYPE=English_United States.utf8   
[3] LC_MONETARY=English_United States.utf8
[4] LC_NUMERIC=C                          
[5] LC_TIME=English_United States.utf8    

time zone: America/New_York
tzcode source: internal

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] lubridate_1.9.4  forcats_1.0.0    stringr_1.5.1    dplyr_1.1.4     
 [5] purrr_1.1.0      readr_2.1.5      tidyr_1.3.1      tibble_3.3.0    
 [9] ggplot2_3.5.2    tidyverse_2.0.0  retrosheet_1.1.6 Lahman_12.0-0   
[13] ggtext_0.1.2    

loaded via a namespace (and not attached):
 [1] utf8_1.2.6         generics_0.1.4     xml2_1.3.8         stringi_1.8.7     
 [5] hms_1.1.3          digest_0.6.37      magrittr_2.0.3     evaluate_1.0.4    
 [9] grid_4.5.1         timechange_0.3.0   RColorBrewer_1.1-3 fastmap_1.2.0     
[13] jsonlite_2.0.0     httr_1.4.7         rvest_1.0.4        scales_1.4.0      
[17] cli_3.6.5          rlang_1.1.6        litedown_0.7       commonmark_2.0.0  
[21] withr_3.0.2        yaml_2.3.10        tools_4.5.1        tzdb_0.5.0        
[25] curl_6.4.0         vctrs_0.6.5        R6_2.6.1           lifecycle_1.0.4   
[29] htmlwidgets_1.6.4  pkgconfig_2.0.3    pillar_1.11.0      gtable_0.3.6      
[33] glue_1.8.0         Rcpp_1.1.0         xfun_0.52          tidyselect_1.2.1  
[37] rstudioapi_0.17.1  knitr_1.50         farver_2.1.2       htmltools_0.5.8.1 
[41] rmarkdown_2.29     labeling_0.4.3     compiler_4.5.1     markdown_2.0      
[45] gridtext_0.1.5    </code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="columns">
<div class="column" style="width:45%;">

</div><div class="column" style="width:10%;">

</div><div class="column" style="width:45%;">

</div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"></ul>
<div class="tab-content">

</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>