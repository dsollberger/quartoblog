{
  "hash": "2a5cc686986c258cb6f83cd7f15facf3",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"KL Divergence for Likert Data\"\nauthor: \"Derek Sollberger\"\ndate: \"2025-04-22\"\nformat:\n  html\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(\"tidyverse\")\n```\n:::\n\n\n\n\n# Abstract\n\nHere I argue that we should use KL Divergence as a metric to measure survey data that was collected as Likert scales.  In this blog post, I will discuss Likert scales, motivate analyses done through the response distributions, and offer guidance on using KL Divergence as a study metric for academic work.\n\n# Introduction\n\nWhen my colleagues and I do research in the realm of the social sciences, we tend to survey our students in hopes of establishing the learning environment and measuring our interventions in the classroom. One scheme is to deploy pre and post surveys at the beginning and end of the term respectively.  To ease the survey taker, some of our survey questions are phrased as Likert scales: \"On a scale from 1 to 7, rate ...\".\n\nWithout loss of generality, this blog post will assume a Likert scale from 1 to 7 and that \"1\" is a label for the worst outcome and \"7\" is a label for the best outcome.\n\n## Likert Scales\n\n::: {.callout-warning collapse=\"true\"}\n## TODO: Describe Likert Scales\n\nLiterature search too?\n:::\n\nBut let me rhetorically ask this:\n\n* Does it make sense to *average* or *weighted mean* of survey responses from Likert scales?\n* Would a response of \"6\" really *double* a response of \"3\"?\n\nOf concern, most responses are simply integers; for example, a response such as \"3.5\" might be highly unusual (or even impossible based on the survey tool). Mathematically, we are not using dense numbers such as real numbers.\n\nLikert scales act more like *categorical labels*. These labels do remind us of ordinal numbers---\"first\", \"second\", \"third\", etc.---but in the opposite direction from \"worst\" to \"best\".\n\nInstead of conventional point statistics such as the mean or median, I suggest focusing on the *distribution* of the survey responses.\n\n\n## KL Divergence\n\nThis view of **relative entropy** was introduced in the field of information theory back in 1951. For our purposes, for Likert scale $X = \\{1, 2, 3, 4, 5, 6, 7\\}$, we have a probability distribution $p(x)$ for the pre-survey response and a probability distribution $q(x)$ for the post-survey response. In this discrete setting, we define the **KL Divergence** from $P$ to $Q$ as\n\n$$D_{\\text{KL}}(Q||P) = \\displaystyle\\sum_{x\\in X} q(x) \\ln \\left(\\frac{q(x)}{p(x)}\\right)$$\n\nThis is the *expectation* of the logarithm of the ratio of probability values.\n\n::: {.callout-warning collapse=\"true\"}\n## TODO: edge cases\n\nWhat if $p(x) = 0$?  What if $q(x) = 0$?\n:::\n\n\n# Methods\n\n## Example\n\nSuppose that we conducted a pre and post survey and received survey results that had the following probability distributions $P$ and $Q$ respectively.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nx <- 1:7\np_x <- c(0.1, 0.2, 0.3, 0.1, 0.1, 0.1, 0.1)\nq_x <- c(0.1, 0.1, 0.1, 0.1, 0.2, 0.3, 0.1)\nprob_tables <- data.frame(x, p_x, q_x)\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](KL_Likert_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](KL_Likert_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n\nThen the KL Divergence going from $P$ to $Q$ \n\n$$(0.1)\\ln\\frac{0.1}{0.1} + (0.1)\\ln\\frac{0.1}{0.2} + (0.1)\\ln\\frac{0.1}{0.3} + (0.1)\\ln\\frac{0.1}{0.1} + (0.2)\\ln\\frac{0.2}{0.1} + (0.3)\\ln\\frac{0.3}{0.1} + (0.1)\\ln\\frac{0.1}{0.1}$$\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nP_to_Q <- rbind(p_x, q_x)\nphilentropy::KL(P_to_Q, unit = \"log\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nMetric: 'kullback-leibler' using unit: 'log'; comparing: 2 vectors.\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nkullback-leibler \n       0.2890372 \n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n::: {.callout-note collapse=\"true\"}\n## Session Info\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsessionInfo()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.4.2 (2024-10-31 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nRunning under: Windows 10 x64 (build 19045)\n\nMatrix products: default\n\n\nlocale:\n[1] LC_COLLATE=English_United States.utf8 \n[2] LC_CTYPE=English_United States.utf8   \n[3] LC_MONETARY=English_United States.utf8\n[4] LC_NUMERIC=C                          \n[5] LC_TIME=English_United States.utf8    \n\ntime zone: America/New_York\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] lubridate_1.9.3 forcats_1.0.0   stringr_1.5.1   dplyr_1.1.4    \n [5] purrr_1.0.4     readr_2.1.5     tidyr_1.3.1     tibble_3.2.1   \n [9] ggplot2_3.5.1   tidyverse_2.0.0\n\nloaded via a namespace (and not attached):\n [1] gtable_0.3.6      jsonlite_1.8.9    compiler_4.4.2    Rcpp_1.0.12      \n [5] tidyselect_1.2.1  scales_1.3.0      yaml_2.3.10       fastmap_1.2.0    \n [9] R6_2.6.1          labeling_0.4.3    generics_0.1.3    knitr_1.50       \n[13] htmlwidgets_1.6.4 munsell_0.5.1     philentropy_0.9.0 pillar_1.10.2    \n[17] tzdb_0.5.0        rlang_1.1.5       stringi_1.8.4     xfun_0.52        \n[21] timechange_0.3.0  cli_3.6.3         withr_3.0.2       magrittr_2.0.3   \n[25] digest_0.6.37     grid_4.4.2        rstudioapi_0.17.1 hms_1.1.3        \n[29] lifecycle_1.0.4   vctrs_0.6.5       evaluate_1.0.3    glue_1.8.0       \n[33] farver_2.1.2      colorspace_2.1-1  rmarkdown_2.29    tools_4.4.2      \n[37] pkgconfig_2.0.3   htmltools_0.5.8.1\n```\n\n\n:::\n:::\n\n\n:::\n\n\n:::: {.columns}\n\n::: {.column width=\"45%\"}\n\t\n:::\n\n::: {.column width=\"10%\"}\n\t\n:::\n\n::: {.column width=\"45%\"}\n\n:::\n\n::::\n\n::::: {.panel-tabset}\n\n\n\n:::::",
    "supporting": [
      "KL_Likert_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}